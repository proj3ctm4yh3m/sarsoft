= Typical Deployment =

Sarsoft is a fully self contained web application that can be run _online_ as a website or _offline_ inside a command post.  A full CP deployment would look like the following:

<img src="http://sarsoft.googlecode.com/svn/wiki/screenshots/CP.png"/>

A machine running Sarsoft sits at a known location (e.g. sarsoft.local or a fixed IP address) so that clients can reach it over the CP network.  The server has copies of all the javascript libraries it relies on (YUI, jQuery, OpenLayers) so clients aren't dependent on the internet to fetch them.  Map tiles and elevation data can be stored locally on the server or on a removable USB drive.  Client machines should have the Garmin plugin preinstalled so that they can upload routes and download tracks to GPS.

Sarsoft is capable of tracking locations using SPOT beacons, the APRS-IS network (both requiring internet access) and local APRS radio traffic (requiring a TNC).  If you need to listen on multiple frequencies (e.g. a data channel and burst-after-voice on a voice channel) Sarsoft supports interfacing multiple TNCs.  For more information on Sarsoft and APRS read the LocationTracking page; for general APRS information visit [http://en.wikipedia.org/wiki/Automatic_Packet_Reporting_System the Wikipedia APRs page], [http://aprs.org/ aprs.org], [http://aprs-is.net/ aprs-is.net] and [http://aprs.fi/ aprs.fi].

= Architecture =

Sarsoft is built on a standard Spring/Hibernate Java web stack.  On the client side, it uses YUI, jQuery, OpenLayers and the Google Maps API.  In some cases components are swapped between online and offline operation, as listed below.  Each of these is independently configurable; there is no master online/offline switch.  All offline components are distributed inside the Sarsoft JAR file.

|| *Component* || *Online Mode* || * Offline Mode* ||
|| App Server || Any Servlet Container || Winstone ||
|| Database || MySQL || HSQLDB ||
|| Map Viewer || Google Maps || OpenLayers ||
|| Map Sources || Various || Local Drive ||

A high level component visualization is shown at bottom.  Some important notes:

 * *HSQLDB* is a small database embedded within its own JDBC driver.  When Hibernate loads the driver, an HSQLDB instance is automatically launched.  Unless overridden in a properties file, this instance will create human-readable SQL files in .sarsoft/hsqldb to store persistent data.

 * *Map Tiles* are available from the project author for SAR purposes; because filesystems do a poor job handling millions of small files, individual files are provided zipped together.  When served through Sarsoft, they can also be loaded in any application that reads Web Mercator (aka google maps style) tiles.

 * *OpenLayers* is an open source map viewer similar to Google Maps.  The copy included with Sarsoft has been customized so that image assets are loaded from the local server, and is now slightly out of date.  All Sarsoft code targets the Google Maps v3 API, and a compatibility wrapper is provided to translate between this API and OpenLayers.

<img src="http://sarsoft.googlecode.com/svn/wiki/screenshots/architecture.png"/>